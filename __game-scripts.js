var Movement=pc.createScript("movement");Movement.prototype.initialize=function(){this.mouse=new pc.Mouse(document.body),this.lastTeleport=0,this.mouse.on("mousemove",this.onMouseMove,this),this.yaw=0,this.entity.collision.on("collisionstart",(function(t){var o=t.other.name;if("Door1"==o){var e=pc.app.root.findByTag("playtp"),i=pc.app.root.findByTag("player")[0];console.log(e[0].getPosition()),console.log(i.getPosition()),this.lastTeleport=Date.now(),i.setPosition(e[0].getPosition()),i.rigidbody.teleport(e[0].getPosition()),i.rigidbody.linearVelocity=pc.Vec3.ZERO,i.rigidbody.angularVelocity=pc.Vec3.ZERO}else if("Door"==o){e=pc.app.root.findByTag("roomtp"),i=pc.app.root.findByTag("player")[0];console.log(e[0].getPosition()),console.log(i.getPosition()),this.lastTeleport=Date.now(),i.setPosition(e[0].getPosition()),i.rigidbody.teleport(e[0].getPosition()),i.rigidbody.linearVelocity=pc.Vec3.ZERO,i.rigidbody.angularVelocity=pc.Vec3.ZERO}}),this)};var v=2;Movement.prototype.update=function(t){this.app.mouse.enablePointerLock(),Date.now()-this.lastTeleport<500||(this.app.keyboard.isPressed(pc.KEY_D)&&this.entity.translateLocal(v*t,0,0),this.app.keyboard.isPressed(pc.KEY_Q)&&this.entity.translateLocal(-v*t,0,0),this.app.keyboard.isPressed(pc.KEY_W)&&this.entity.translateLocal(0,0,-v*t),this.app.keyboard.isPressed(pc.KEY_S)&&this.entity.translateLocal(0,0,v*t),this.app.keyboard.wasPressed(pc.KEY_SPACE)&&this.entity.translate(0,v*t*10,0),this.entity.rotateLocal(0,this.yaw,0),this.entity.rigidbody.teleport(this.entity.getPosition()),this.yaw=0)},Movement.prototype.onMouseMove=function(t){this.yaw-=.1*t.dx};var CameraControl=pc.createScript("cameracontrol");CameraControl.prototype.initialize=function(){this.mouse=new pc.Mouse(document.body),this.mouse.on("mousemove",this.onMouseMove,this),this.pitch=0},CameraControl.prototype.update=function(t){this.entity.rotateLocal(this.pitch,0,0),this.pitch=0},CameraControl.prototype.onMouseMove=function(t){this.pitch-=.1*t.dy,this.pitch=pc.math.clamp(this.pitch,-90,90)};